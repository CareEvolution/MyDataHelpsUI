# This file is used to set up headers and a content security policy for your app if you are hosting it via AWS Amplify.
# A valid content security policy is required for a view to be hosted inside a production MyDataHelps project: https://developer.mydatahelps.org/views/review.html
# If you are not hosting your app using AWS amplify, this file can be deleted.
customHeaders:
  - pattern: '**/*'
    headers:
      - key: 'Strict-Transport-Security'
        value: 'max-age=31536000; includeSubDomains'
      - key: 'X-XSS-Protection'
        value: '1; mode=block'
      - key: 'X-Content-Type-Options'
        value: 'nosniff'
      - key: 'Access-Control-Allow-Origin'
        value: '*'
      - key: 'Access-Control-Allow-Methods'
        value: 'GET, HEAD, OPTIONS'
      - key: 'Content-Security-Policy'
        value: "default-src 'self'; 
                script-src 'self' 'unsafe-inline' ; 
                object-src 'self'; 
                style-src 'self' 'unsafe-inline' ; 
                img-src 'self' data: mydatahelps.org mdhorg.ce.dev rkstudio-customer-assets.s3.amazonaws.com assets.careevolutionapps.com; 
                media-src 'self'; 
                frame-src 'self'; 
                font-src 'self'; 
                connect-src 'self' mydatahelps.org assets.careevolutionapps.com;"
  # Tell the browser to cache static resources https://careevolution.slab.com/posts/cache-control-headers-9jut90d5
  - pattern: "**/*.css"
    headers:
      - key: Cache-Control
        value: public, max-age=300, stale-while-revalidate=86400
  - pattern: "**/*.js"
    headers:
      - key: Cache-Control
        value: public, max-age=300, stale-while-revalidate=86400
  - pattern: "**/*.svg"
    headers:
      - key: Cache-Control
        value: public, max-age=300, stale-while-revalidate=86400
  - pattern: "**/*.png"
    headers:
      - key: Cache-Control
        value: public, max-age=300, stale-while-revalidate=86400
  - pattern: "**/*.gif"
    headers:
      - key: Cache-Control
        value: public, max-age=300, stale-while-revalidate=86400
  - pattern: "**/*.jpg"
    headers:
      - key: Cache-Control
        value: public, max-age=300, stale-while-revalidate=86400
  - pattern: "**/*.woff"
    headers:
      - key: Cache-Control
        value: public, max-age=300, stale-while-revalidate=86400
  - pattern: "**/*.woff2"
    headers:
      - key: Cache-Control
        value: public, max-age=300, stale-while-revalidate=86400
  - pattern: "**/*.ico"
    headers:
      - key: Cache-Control
        value: public, max-age=300, stale-while-revalidate=86400

